**Auth**
- Auth Protocol: OAuth 2.0 + JWT
- API Style: REST
- Early Development Phase
- Focus on JWT logic first
- Manual Keys: Generate your RSA private_key.pem and public_key.pem once.
- Environment Variables: Store the keys as strings in a .env file. Your services read them from there.

- Microservices Stage
- Decentralized Authorization
  - Statelessness: The Forum (Python) and Chat (Java) services do not call the Auth Service to verify a user. 
  - Public Key Verification: At startup, the Forum/Chat services fetch the Public RSA Key from Vault. They use this to verify the signature of every incoming request locally.
- Token Rotation: Implementing Refresh Tokens. Access Tokens live for 15 minutes; Refresh Tokens live for 7 days and are stored in the DB to allow for remote logout/revocation.
- Role-Based Access Control (RBAC): Roles (STUDENT, ADMIN) are embedded in the JWT claims, allowing for instant permission checks at the "Service Edge."
- Key Caching: Services fetch the Public Key from Vault at startup and cache it locally to ensure low-latency, stateless authorization.
- Asymmetric JWT keypairs
- keys are handled by self-hosted hashicorp vault to stay encrypted
- java auth handles the identity (private), while python forum and java chat handles the authorization (public)
- In a nutshell: JWT is the dynamic identity (temporary), differs for every user, but the encryption for the identity is done by hashicorp vault keys so services can communicate with each other

**Forum**
Communication Pattern (**OPTIONAL**)
(Internal Pub/Sub):
Publish: When a comment is saved, your code emits an internal event: eventEmitter.emit('comment.created', data).
Subscribe: You have a separate "Notification Listener" in your code that stays quiet until it hears that event. When it does, it writes the row to the Notifications database table.
API Style
- REST (for comments, **PAGINATION TO BE IMPLEMENTED LATER**)
- WebSockets (**OPTIONAL**, if want to make notifications real-time, that would need a seperate notification service which is tedious for now, but it ensures SRP for each container because notifications can serve different things)
  
should notifications be a separate service, currently my services are based on business domains
- ideally yes, notifiactions should be able to handle other domains

**Chat**
- API Style: 
  - REST (cold data: fetching chat history, CRUD friends)
  - WebSockets (live data: real-time messaging, online/typing/read receipts)

- Caching is needed for websockets stuff (this is a custom module, justifiable to earn points)
  - needs one more redis container
- Messaging Queue (Pub/Sub, Backend-to-Backend Communication) is required when a message is sent, it should be asynchronous, the history is saved in the db and then sent to the recipient
- (OPTIONAL BUT DIFFICULT) Reactive Programming (Mutiny) to bridge the gap between WebSockets and Pub/Sub, ensure that message persistence and message deliveryhappen asynchronously. This architecture prevents 'Thread Exhaustion' and allows the service to remain responsive under heavy loads, which is a key requirement for high-concurrency real-time systems