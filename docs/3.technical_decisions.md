# Technical Stack & Implementation Guidelines

## 1. Frontend Strategy (A)
* **Framework:** Next.js (App Router)+ TypeScript (Industry standard for SSR/BFF architecture; provides automatic routing and optimized data fetching.)
* **Build Tool:** Turbopack with SWC.
* **Styling:** Tailwind CSS (Rapid UI development).
* **Type Safety:** TypeScript (Strict Mode).
* **State Management Libraries:** Zustand (Client State) + React Query (TanStack) (Server-state)("Stale-While-Revalidate" (SWR) effect, caching and sync).
* **Pattern:** Atomic Design + Composition.
* **Formatting:** Biome (Single high-performance tool replacing ESLint and Prettier; keeps the team synchronized with zero-config overhead.)

```yaml
frontend/src
├── app/                  # THE ROUTING LAYER (Keep this thin)
│   ├── layout.tsx        # Global shell (Providers, Navbar)
│   ├── (auth)/           # Route Group: /login, /register
│   ├── forum/            # /forum
│   │   ├── [id]/         # Dynamic route: /forum/123
│   │   └── page.tsx      
│   └── chat/             # /chat
├── features/             # THE BUSINESS LOGIC (The Heart)
│   ├── auth/             # Everything related to Auth
│   │   ├── components/   # LoginForm.tsx, UserAvatar.tsx
│   │   ├── hooks/        # useAuth.ts
│   │   └── services/     # auth-api.ts (calls Java service)
│   ├── forum/            # Everything related to Forum
│   │   ├── components/   # PostList.tsx, CommentItem.tsx
│   │   ├── store/        # forum-store.ts (Zustand)
│   │   └── types.ts      
│   └── chat/             # Everything related to Chat
├── components/           # SHARED UI (The Design System)
│   └── ui/               # Shadcn/ui Atoms (Button, Input, Card)
├── lib/                  # SHARED UTILS (Third-party config)
│   ├── apiClient.ts      # Axios/Fetch wrapper
│   └── biome.json        # Linter config
└── hooks/                # SHARED HOOKS (useDebounce, useMediaQuery)
```

## 2. Backend: Java Services (Auth & Chat)
* **Framework:** Quarkus (Container-first, fast startup).
* **Pattern:** Service-Repository + Anemic Domain Model.
* **Data Layer:** Hibernate ORM with Panache (Repository Pattern).
* **Validation:** Jakarta Bean Validation (Hibernate Validator).
* **Formatting:** Spotless Maven Plugin (Google Java Format).

### Directory Structure (Java)
```yaml
src/main/java/org/acme
├── /api           # Controllers (Strict Input/Output, HTTP only)
├── /service       # Business Logic (OAuth, Vault calls)
├── /model         # Entities (1:1 mapping with DB tables)
├── /dto           # Data Transfer Objects (Public structs)
└── /repository    # DB Access (Panache/SQL)
```

## 3. Backend: Python Service (Forum)
* **Framework:** FastAPI (High performance, async native).
* **Pattern:** Procedural/Functional (C-style logic).
* **Type Safety:** Pyright (Static) + Pydantic (Runtime).
* **ORM:** SQLAlchemy (Standard relational mapper).
* **Formatting:** Ruff (Linting + Formatting).

```yaml
forum/
├── src/
│   ├── internal/        # Utils (JWT Auth, Markdown Sanitizer)
│   ├── database.py      # DB Connection
│   ├── logic.py         # Business Logic Functions
│   ├── main.py          # Entrypoint
│   ├── models.py        # SQLAlchemy Models
│   └── schemas.py       # Pydantic Models
└── tests/               # External tests
```

## 4. Infrastructure & Data
* **Database:** PostgreSQL (Relational Data).
* **Caching:** Redis (Session storage, WebSocket Pub/Sub, Online Status).
* **Secrets:** HashiCorp Vault.

## 5. Branching & Git Strategy
* **Main:** Production ready code.
* **Develop:** Integration branch.
* **Feat/[name]:** Feature branches.
* **PR Rules:** Must pass Spotless/Ruff check before merge.